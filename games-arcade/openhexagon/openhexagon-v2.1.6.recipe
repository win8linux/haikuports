SUMMARY="C++20 FOSS clone of Super Hexagon"
DESCRIPTION="Four buttons, one goal: survive.

Are you ready for a real challenge? -- Become the best and climb the \
leaderboards in Open Hexagon, a fast-paced adrenalinic arcade game that's \
easy to learn but hard to master!

There are four main actions you can perform: rotate clockwise, rotate \
counter-clockwise, swap by 180° degrees, and focus.

Simplicity and minimalism are key features of Open Hexagon. While some \
levels might have special quirks and mechanics, the goal is always the \
same: survive as long as possible.

Open Hexagon is an officially-endorsed open-source clone of the hit 2012 \
indie video game Super Hexagon from VVVVVV creator Terry Cavanagh. The\
game takes design cues from the original and expands upon it by \
introducing a 180° swap, curving/accelerating walls, scripting, and much \
more.

Open Hexagon was developed with the goal of being open. Players can \
create their own custom levels by using the simple yet immensely powerful \
Lua scripting language.

NOTE: This package does not include music from the Steam version."
HOMEPAGE="https://openhexagon.org/"
COPYRIGHT="2021-2023 Vittorio Romeo"
LICENSE="AFL v3.0"
REVISION="1"

SOURCE_URI="https://github.com/vittorioromeo/SSVOpenHexagon/archive/$portVersion.tar.gz"
CHECKSUM_SHA256="a3366aab9e8462d330044ab1ec63927e9f5c3801c0ed96b24f08c553dcb911e9"
SOURCE_DIR="SSVOpenHexagon-$portVersion"

SOURCE_URI_2="https://github.com/vittorioromeo/SSVMenuSystem/archive/master.zip"
CHECKSUM_SHA256_2="af7421bae36310dbeb47f63f656ad72d5d9387d9db8ea70fe9c1996fb711a9ff"
SOURCE_URI_3="https://github.com/vittorioromeo/SSVUtils/archive/master.zip"
CHECKSUM_SHA256_3="0f803b85ac2f09ba72665e57d0c6d97f1fe6dec72108cac5e825d93394e802f3"
SOURCE_URI_4="https://github.com/vittorioromeo/vrm_cmake/archive/master.zip"
CHECKSUM_SHA256_4="c810a239d05de98049ffd024208642d225491e796f2956da0fb7a88db9b8ec47"
SOURCE_URI_5="https://github.com/vittorioromeo/SSVCMake/archive/master.zip"
CHECKSUM_SHA256_5="76972966ad2cf300c43ebae81808c707c4f1600f283ec6d48cd20392e5f23f96"
SOURCE_URI_6="https://github.com/vittorioromeo/SSVStart/archive/master.zip"
CHECKSUM_SHA256_6="8adb0389882c358841475bee28699f3360bd5adc72d33ed7519ad8170c1553af"
SOURCE_URI_7="https://github.com/vittorioromeo/vrm_pp/archive/master.zipp"
CHECKSUM_SHA256_7="259a12e02c95d89d2828875dd3be64d27d45fa5177193f6cc3a9db1d0c4104d1"

ARCHITECTURES="all !x86_gcc2"
SECONDARY_ARCHITECTURES="x86"

PROVIDES="
	open_hexagon$secondaryArchSuffix = $portVersion
	app:open_hexagon = $portVersion
	"
REQUIRES="
	haiku$secondaryArchSuffix
	lib:libfreetype$secondaryArchSuffix
	lib:libGL$secondaryArchSuffix
	lib:libogg$secondaryArchSuffix
	lib:libopenal$secondaryArchSuffix
	lib:libvorbis$secondaryArchSuffix
	lib:libvorbisenc$secondaryArchSuffix
	lib:libvorbisfile$secondaryArchSuffix
	open_hexagon_data
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	devel:libfreetype$secondaryArchSuffix
	devel:libGL$secondaryArchSuffix
	devel:libopenal$secondaryArchSuffix
	devel:libogg$secondaryArchSuffix
	devel:libvorbis$secondaryArchSuffix
	devel:libvorbisenc$secondaryArchSuffix
	devel:libvorbisfile$secondaryArchSuffix
	"
BUILD_PREREQUIRES="
	cmd:cmake
	cmd:gcc$secondaryArchSuffix
	cmd:make
	"

BUILD()
{
	cd buildlx/
	cmake ..
	make $jobArgs
	mv SSVOpenHexagon ../_RELEASE
}

INSTALL()
{
	mkdir -p $appsDir/openhexagon
	cp -r ./_RELEASE/* $appsDir/openhexagon/*

	addAppDeskbarSymlink $appsDir/vvvvvv/VVVVVV
}
